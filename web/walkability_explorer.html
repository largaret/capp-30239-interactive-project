<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <title>Walkability Explorer</title>
  <link href="walkability_explorer.css" rel="stylesheet" />
  <link
    href="https://unpkg.com/maplibre-gl@3.6.1/dist/maplibre-gl.css"
    rel="stylesheet"
  />
</head>

<body>

  <div id="container">

    <div id="sidebar">
      <h2>Walkability Explorer</h2>
      <p>
        Explore walkability across various U.S. cities using the National Walkability Index and its components. Use the controls to customize the map view.
      </p>
      <p>
        Data Source: <a href="https://www.epa.gov/smartgrowth/national-walkability-index">EPA National Walkability Index</a>
      </p>

      <!-- Reset View Button -->
      <button id="resetViewBtn">Back to US map</button>

      <!-- Dropdown to select color variable -->
      <label for="colorVar">Color blocks by:</label>
      <select id="colorVar">
        <option value="NatWalkInd">Walkability Index</option>
        <option value="D2A_Ranked">Ranked Employment and Household Entropy </option>
        <option value="D2B_Ranked">Ranked Employment Entropy</option>
        <option value="D3B_Ranked">Ranked Street Intersection Density</option>
        <option value="D4A_Ranked">Ranked Distance to Nearest Transit Stop</option>

      </select>
      
      <button id="newSearchBtn" popovertarget="searchContainer" popovertargetaction="show">Search for an address</button>

      <!-- Info Box -->
      <div id="infoBox">
        <h4>Block Group Info</h4>
        <div id="infoContent">
          <p>Search for an address or hover over the map to see block walkability details.</p>
        </div>
      </div>
    </div>

    <!-- Map -->
    <div id="map-container">
      <!-- Search Container -->
      <div id="searchContainer" popover="manual">
        <div>
          <p>Search for a U.S. address:</p>
          <button popovertarget="searchContainer" popovertargetaction="hide">Close</button>
        </div>
        <!-- Address Search -->
        <input type="text" id="addressInput" placeholder="Search address..." autocomplete="off">
        <button id="goAddressBtn">Go</button>
        <div id="autocompleteList"></div>
      </div>

      <div id="map"></div>
      
      <!-- Map Legend -->
      <div id="map-legend">
        <div class="legend-scale">
          <div class="legend-color" style="background:#ffffcc"></div><span></span>
          <div class="legend-color" style="background:#a1dab4"></div><span></span>
          <div class="legend-color" style="background:#41b6c4"></div><span></span>
          <div class="legend-color" style="background:#2c7fb8"></div><span></span>
          <div class="legend-color" style="background:#253494"></div><span></span>
        </div>
        <div class="legend-labels">
          <div class="legend-label">Low Walkability</div>
          <div class="legend-label" style="text-align: right;">High Walkability</div>
      </div>
    </div>
  </div>

  <script src="https://unpkg.com/maplibre-gl@3.6.1/dist/maplibre-gl.js"></script>
  <!-- Turf.js for spatial analysis -->
  <script src="https://cdn.jsdelivr.net/npm/@turf/turf@6/turf.min.js"></script>
  <script src="walkability_explorer.js"></script>

</body>
</html>
